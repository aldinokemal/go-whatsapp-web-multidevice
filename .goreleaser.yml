project_name: whatsapp

builds:
  # Linux builds (native and cross-compile)
  - id: linux-amd64
    dir: ./src
    main: .
    env:
      - CGO_ENABLED=1
      - CC=gcc
    goos:
      - linux
    goarch:
      - amd64
    ldflags: -s -w
    binary: "{{ .Os }}-{{ .Arch }}"
    
  - id: linux-arm64
    dir: ./src
    main: .
    env:
      - CGO_ENABLED=1
      - CC=aarch64-linux-gnu-gcc
    goos:
      - linux
    goarch:
      - arm64
    ldflags: -s -w
    binary: "{{ .Os }}-{{ .Arch }}"
    
  - id: linux-386
    dir: ./src
    main: .
    env:
      - CGO_ENABLED=1
      - CC=gcc
    goos:
      - linux
    goarch:
      - "386"
    ldflags: -s -w
    binary: "{{ .Os }}-{{ .Arch }}"
    
  # Windows builds
  - id: windows-amd64
    dir: ./src
    main: .
    env:
      - CGO_ENABLED=1
      - CC=x86_64-w64-mingw32-gcc
    goos:
      - windows
    goarch:
      - amd64
    ldflags: -s -w
    binary: "{{ .Os }}-{{ .Arch }}"
    
  - id: windows-386
    dir: ./src
    main: .
    env:
      - CGO_ENABLED=1
      - CC=i686-w64-mingw32-gcc
    goos:
      - windows
    goarch:
      - "386"
    ldflags: -s -w
    binary: "{{ .Os }}-{{ .Arch }}"
    
  # macOS builds (will only work on macOS runners)
  - id: darwin-amd64
    dir: ./src
    main: .
    env:
      - CGO_ENABLED=1
    goos:
      - darwin
    goarch:
      - amd64
    ldflags: -s -w
    binary: "{{ .Os }}-{{ .Arch }}"
    
  - id: darwin-arm64
    dir: ./src
    main: .
    env:
      - CGO_ENABLED=1
    goos:
      - darwin
    goarch:
      - arm64
    ldflags: -s -w
    binary: "{{ .Os }}-{{ .Arch }}"

archives:
  - id: binaries
    builds:
      - linux-amd64
      - linux-arm64
      - linux-386
      - windows-amd64
      - windows-386
      - darwin-amd64
      - darwin-arm64
    format: zip
    name_template: "{{ .ProjectName }}_{{ .Version }}_{{ .Os }}_{{ .Arch }}"

checksum:
  name_template: "checksums.txt"

release:
  draft: false
  github:
    owner: "aldinokemal"
    name: "go-whatsapp-web-multidevice"